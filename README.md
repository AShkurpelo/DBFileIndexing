# DBFileIndexing
University project. Ilustrating DB file indexes

В ходе проекта выполнена реализация небольшой СУБД с функциями поиска (алгоритм поиска - метод Шарра), добавления, удаления и редактирования записей.

Хранение данных выполнено в файлах с неплотным индексом и областью переполнения.

Для наглядной демонстрации структуры хранения файлов и индексов добавлен простой графический интерфейс реализованный с помощью Windows Forms.

Для работы с файлами используется считывание по блокам размерами 4096 байт для лучшей производительности.

Ниже приведены псевдо-алгоритмы для работы с записью:

Алгоритм поиска записи в файле с неплотным индексом с областью переполнения:
1. Методом Шарра находим необходимый блок записей в индексном файле.
2. Методом Шарра находим в этом блоке номер необходимого блока из основного файла данных.
3. Считываем блок из основного файла.
4. Если в конце считанного блока указана ссылка на область переполнения, считываем все записи из области переполнения, относящиеся к этому блоку.
5. Методом Шарра находим нужную запись в сформировавшемся наборе записей.


Алгоритм добавления записи в файле с неплотным индексом с областью переполнения:
1. Методом Шарра находим необходимый блок записей в индексном файле.
2. Методом Шарра находим в этом блоке номер необходимого блока из основного файла данных.
3. Считываем блок из основного файла.
4. Если в конце считанного блока указана ссылка на область переполнения, считываем все записи из области переполнения, относящиеся к этому блоку.
5. Методом Шарра находим место для новой записи в сформировавшемся наборе записей.
6. Записываем отредактированный блок в основной файл.
7. В случае переполнения записываем «лишние» записи в область переполнения с указанием ссылки в конце каждой записи на следующую (структура связанного списка) и добавляем ссылку на первую из них в конец блока.

Алгоритм удаления записи в файле с неплотным индексом с областью переполнения:
1. Методом Шарра находим необходимый блок записей в индексном файле.
2. Методом Шарра находим в этом блоке номер необходимого блока из основного файла данных.
3. Считываем блок из основного файла.
4. Если в конце считанного блока указана ссылка на область переполнения, считываем все записи из области переполнения, относящиеся к этому блоку.
5. Методом Шарра находим запись и удаляем её в сформировавшемся наборе записей.
6. Записываем отредактированный блок в основной файл.
7. В случае переполнения записываем «лишние» записи в область переполнения с указанием ссылки в конце каждой записи на следующую (структура связанного списка) и добавляем ссылку на первую из них в конец блока.
